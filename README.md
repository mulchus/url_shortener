# Приложение для создания и использования коротких ссылок
Исходник-туториал: https://realpython.com/build-a-python-url-shortener-with-fastapi/


## Настройки

Для запуска у вас уже должен быть установлен Python 3.

- Скачайте код
- Перейдите в виртуальное окружение
- Установите зависимости командой 
```
pip install -r requirements.txt
```

Создайте файл `.env` в корне проекта и пропишите в нем следующие константы:
```
ENV_NAME="Development"  - любое имя этой настройки
BASE_URL="http://127.0.0.1:8000"  - базовый URL размещения приложения
DB_URL="sqlite:///./shortener.db"  - URL подключения к базе данных
```


## Запуск
- Запустите скрипт командой 
```commandline
uvicorn shortener_app.main:app --reload
```


## Эндпоинты

- `/` - страница приветствия
- `/{url_key}` - переход по короткой ссылке
- `/info/{url_key}` - получение информации об оригинальной ссылке по короткой ссылке
- `/admin/{secret_key}` - получение всей информации о короткой ссылке (для администратора)
- `/admin/{secret_key}` - удаление короткой ссылки (для администратора) (**DELETE запрос**)  
    secret_key - секретный ключ (8 цифр и букв), предоставляется в ответном сообщении при создании короткой ссылки
- `/url` - создание короткой ссылки (**POST запрос**)  
    Формат запроса:
    ```json
    {
      "target_url": "string",  - адрес целевой ссылки
      "custom_key": "string"   - кастомная короткая ссылка из 5 цифр и (или) букв (необязательное поле) 
    }
    ```
    Например:

    ```json
    {
      "target_url": "https://realpython.com",
      "custom_key": "ABC45"
    }
    ```

Например:
- http://127.0.0.1:8000/123456 - переход по короткой ссылке
- http://127.0.0.1:8000/info/123456 - получение информации об оригинальной ссылке по короткой ссылке
- http://127.0.0.1:8000/admin/12345_ABCDEFGH - получение информации о короткой ссылке  
    Ответ: 
    ```json
    {
      "target_url":"https://realpython.com/build-a-python-url-shortener-with-fastapi/",
      "custom_key":null,  
      "is_active":true,
      "clicks":5,
      "url":"http://127.0.0.1:8000/GRYE5",
      "admin_url":"http://127.0.0.1:8000/admin/GRYE5_QDY3QLEI"}
    }
    ```

При каждом переходе по ссылке количество кликов увеличивается на единицу.


## Цели проекта

Код написан в учебных целях.
